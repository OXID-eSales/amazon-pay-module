{% extends "page/checkout/order.html.twig" %}

{% block checkout_order_address %}
    {% if oViewConf.isAmazonActive() and oViewConf.isAmazonSessionActive() and not oViewConf.isAmazonExclude() %}
        {% include "@osc_amazonpay/amazonpay/checkout_order_address_twig" %}
    {% else %}
        {{ parent() }}
    {% endif %}
{% endblock %}


{% block checkout_order_btn_confirm_bottom %}
    {% set oPayment = oView.getPayment() %}
    {% set paymentId = oPayment.getId() %}
    {% if (
        oViewConf.isAmazonActive() and
        paymentId == oViewConf.getAmazonPaymentId() and
        not oViewConf.isAmazonExclude()
        )
    %}
        {{ parent() }}
        {% include "@osc_amazonpay/amazonpay/checkout_order_btn_submit_bottom" with {paymentId: paymentId} %}
    {% else %}
        {{ parent() }}
    {% endif %}
{% endblock %}

{% block shippingAndPayment %}
    {% if oViewConf.isAmazonActive() and oViewConf.isAmazonSessionActive() %}
        {% if oViewConf.isAmazonPaymentPossible() %}
            {% include "@osc_amazonpay/amazonpay/shippingandpayment_twig" %}
        {% else %}
            {% include "@osc_amazonpay/amazonpay/shippingandpayment_error" %}
        {% endif %}
    {% else %}
        {{ parent() }}
    {% endif %}
{% endblock %}
